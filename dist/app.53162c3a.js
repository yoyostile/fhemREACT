webpackJsonp([0,2],{lVK7:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}n("cilB"),n("ozen"),n("/gVB");var r=n("U7vG"),a=o(r),i=n("O27J"),s=n("pnOm"),l=o(s);(0,i.render)(a.default.createElement(l.default,null),document.querySelector("#app"))},0:function(e,t,n){n("0RdU"),e.exports=n("lVK7")},cilB:function(e,t){},pnOm:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n("U7vG"),l=o(s),u=n("zvKi"),c=o(u),f=n("TVRk"),p=o(f),d=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.onConfirmURLInput=o.onConfirmURLInput.bind(o),o.resetFhemURL=o.resetFhemURL.bind(o),o.state={fhemURL:localStorage.getItem("fhemURL")||""},o}return i(t,e),t.prototype.onConfirmURLInput=function(e){console.log(e),this.setState(function(t,n){if(e.match(/ws:\/\/\S*/))return localStorage.setItem("fhemURL",e),{fhemURL:e}})},t.prototype.resetFhemURL=function(){localStorage.setItem("fhemURL",""),this.setState({fhemURL:""})},t.prototype.render=function(){return l.default.createElement("div",{className:"App"},l.default.createElement("div",{className:"small-12 columns"},l.default.createElement("h1",null,"reactFHEM ",l.default.createElement("small",{className:"cursor",onClick:this.resetFhemURL},"Reset Host"))),l.default.createElement("div",{className:"small-12 columns"},this.state.fhemURL?l.default.createElement(c.default,null):l.default.createElement(p.default,{onConfirm:this.onConfirmURLInput})))},t}(l.default.Component);t.default=d,e.exports=t.default},zvKi:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,n("CE+p");var s=n("U7vG"),l=o(s),u=n("DmT9"),c=o(u),f=n("M4fF"),p=o(f),d=n("2x5+"),h=o(d),m=n("c3Ca"),v=o(m),b="ws://fhem.lan.r4r3.me:8086/",y=(0,c.default)(b,{timeout:5e3,"sync disconnect on unload":!0}),C=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.handleRoomChange=o.handleRoomChange.bind(o),o.handleDeviceCommand=o.handleDeviceCommand.bind(o),o.handleDeviceChange=o.handleDeviceChange.bind(o),o.state={jsonlist:{Results:[]},rooms:[],activeRoom:"Wohnzimmer"},o}return i(t,e),t.prototype.componentDidMount=function(){var e=this;y.connect(),y.emit("JsonList2","",function(t){var n=e.getRoomsFromData(t);e.setState({jsonlist:t,rooms:n})}),y.emit("getAllDevicesOnChange"),y.on("device",this.handleDeviceChange)},t.prototype.getRoomsFromData=function(e){return p.default.chain(e.Results).map(function(e){return e.Attributes.room}).map(function(e){return e?p.default.split(e,","):""}).flatten().uniq().compact().value()},t.prototype.getDevicesForActiveRoom=function(){var e=this;return this.state.jsonlist.Results.filter(function(t){return!!t.Attributes.room&&(t.Attributes.room.match(e.state.activeRoom)&&t.Attributes.alias)})},t.prototype.handleDeviceChange=function(e){console.log("DEVICECHANGE");var t=e.Results[0],n=t.Name,o=this.state.jsonlist.Results.slice(0),r=p.default.findIndex(o,function(e){return e.Name==n});o[r]=t,this.setState({jsonlist:{Results:o}})},t.prototype.handleRoomChange=function(e){var t=e.target.textContent;this.setState({activeRoom:t})},t.prototype.handleDeviceCommand=function(e){y.emit("command",e,function(t){console.log("sending: "+e),console.log(t)})},t.prototype.render=function(){var e=this;return l.default.createElement("div",{className:"b-fhem"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"small-12 medium-3 columns"},l.default.createElement(h.default,{activeRoom:this.state.activeRoom,rooms:this.state.rooms,handleRoomChange:this.handleRoomChange})),l.default.createElement("div",{className:"small-12 medium-9 columns"},l.default.createElement("ul",{className:"b-fhem-devices"},this.getDevicesForActiveRoom().map(function(t,n){return l.default.createElement(v.default,{key:t.Name,handleDeviceCommand:e.handleDeviceCommand,device:t})})))))},t}(l.default.Component);t.default=C,e.exports=t.default},"CE+p":function(e,t){},TVRk:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n("U7vG"),l=o(s),u=n("M4fF"),c=(o(u),n("Cf7X")),f=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){return l.default.createElement("div",{className:"b-fhem-url-input pt-card pt-elevation-2"},l.default.createElement("h3",null,"Please provide your fhem.js URL!"),l.default.createElement("h1",null,l.default.createElement(c.EditableText,{placeholder:"ws://your-fhem-host:8086/",onConfirm:this.props.onConfirm})))},t}(l.default.Component);t.default=f,e.exports=t.default},"2x5+":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n("U7vG"),l=o(s),u=n("M4fF"),c=(o(u),n("Cf7X")),f=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=this;return l.default.createElement("div",{className:"b-fhem-room-switcher"},l.default.createElement(c.Menu,null,this.props.rooms.map(function(t,n){return l.default.createElement(c.MenuItem,{key:n,onClick:e.props.handleRoomChange,text:t,disabled:e.props.activeRoom==t})})))},t}(l.default.Component);t.default=f,e.exports=t.default},c3Ca:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n("U7vG"),l=o(s),u=n("M4fF"),c=(o(u),n("BKUj")),f=o(c),p=n("xOTe"),d=o(p),h=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){switch(this.props.device.Internals.TYPE){case"IT":return l.default.createElement(f.default,{device:this.props.device,handleDeviceCommand:this.props.handleDeviceCommand});case"MAX":return l.default.createElement(d.default,{device:this.props.device,handleDeviceCommand:this.props.handleDeviceCommand});default:return l.default.createElement("li",null,this.props.device.Attributes.alias)}},t}(l.default.Component);t.default=h,e.exports=t.default},BKUj:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n("U7vG"),l=o(s),u=n("M4fF"),c=(o(u),n("Cf7X")),f=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.handleChange=o.handleChange.bind(o),o}return i(t,e),t.prototype.handleChange=function(e){var t="on"==this.props.device.Internals.STATE?"off":"on";this.props.handleDeviceCommand("set "+this.props.device.Name+" "+t)},t.prototype.render=function(){return l.default.createElement("div",{className:"b-fhem-it-device"},l.default.createElement(c.Switch,{checked:"on"==this.props.device.Internals.STATE,label:this.props.device.Attributes.alias,onChange:this.handleChange}))},t}(l.default.Component);t.default=f,e.exports=t.default},xOTe:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n("U7vG"),l=o(s),u=n("M4fF"),c=(o(u),n("Cf7X")),f=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.handleChange=o.handleChange.bind(o),o.state={value:parseFloat(o.props.device.Internals.STATE)},o}return i(t,e),t.prototype.handleChange=function(e){var t=this;this.setState({value:e},function(){t.props.handleDeviceCommand("set "+t.props.device.Name+" desiredTemperature "+t.state.value)})},t.prototype.valuesForDevice=function(e){return e.PossibleSets.match(/desiredTemperature:(\S*)/)[1].split(",")},t.prototype.numericValuesForDevice=function(e){return this.valuesForDevice(e).map(parseFloat).filter(function(e){return!isNaN(e)})},t.prototype.buttonValuesForDevice=function(e){return this.valuesForDevice(e).filter(isNaN)},t.prototype.renderTemperatureLabel=function(e){return e+"℃"},t.prototype.render=function(){var e=this.numericValuesForDevice(this.props.device),t=(parseFloat(this.props.device.Readings.state.Value),parseFloat(this.props.device.Readings.temperature.Value));return l.default.createElement("div",{className:"b-fhem-max-device"},l.default.createElement("p",{className:"pt-ui-text-large"},this.props.device.Attributes.alias," - ",t,"℃"),this.props.device.Readings.valveposition?l.default.createElement("p",null,"Geöffnet: ",parseFloat(this.props.device.Readings.valveposition.Value),"%"):null,l.default.createElement(c.Slider,{disabled:!1,min:e[0],max:e[e.length-1],labelStepSize:2.5,stepSize:.5,value:this.state.value,onChange:this.handleChange,renderLabel:this.renderTemperatureLabel}))},t}(l.default.Component);t.default=f,e.exports=t.default},1:function(e,t){}});
//# sourceMappingURL=app.53162c3a.js.map